<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>数据存储/MySQL/MySQL 学习总结 | 冲鸭</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="MySQL,MySQL事务">
    <meta name="description" content="MySQL 学习总结MysQL 架构                                                                                             MySQL架构图               InnoDB 不是 MySQL 自带的存储引擎，是一种可插拔的插件。InnoDB、MyISAM、MEMORY存储引擎是根据表来设置的">
<meta property="og:type" content="article">
<meta property="og:title" content="数据存储&#x2F;MySQL&#x2F;MySQL 学习总结">
<meta property="og:url" content="https://zcy-fover.github.io/2020/04/28/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/MySQL/MySQL%20%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="冲鸭">
<meta property="og:description" content="MySQL 学习总结MysQL 架构                                                                                             MySQL架构图               InnoDB 不是 MySQL 自带的存储引擎，是一种可插拔的插件。InnoDB、MyISAM、MEMORY存储引擎是根据表来设置的">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/WEB40e7894c09929b10b65628a164da9a2c?method=download&shareKey=ce955cd898d0763566e9feef24f83210">
<meta property="article:published_time" content="2020-04-28T15:01:23.967Z">
<meta property="article:modified_time" content="2020-04-28T15:04:42.646Z">
<meta property="article:author" content="zcy-fover">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="MySQL事务">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://note.youdao.com/yws/api/personal/file/WEB40e7894c09929b10b65628a164da9a2c?method=download&shareKey=ce955cd898d0763566e9feef24f83210">
    
        <link rel="alternate" type="application/atom+xml" title="冲鸭" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/%E7%A7%91%E6%8A%80.png">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="https://pic.yupoo.com/zcyfover/782a3ab3/13a00e51.jpeg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">zcy-fover</h5>
          <a href="mailto:zcyfover@163.com" title="zcyfover@163.com" class="mail">zcyfover@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/zcy-fover" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/resume"  >
                <i class="icon icon-lg icon-file-word-o"></i>
                简历
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">数据存储/MySQL/MySQL 学习总结</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">数据存储/MySQL/MySQL 学习总结</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-04-28T15:01:23.967Z" itemprop="datePublished" class="page-time">
  2020-04-28
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/MySQL/">MySQL</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#MySQL-学习总结"><span class="post-toc-number">1.</span> <span class="post-toc-text">MySQL 学习总结</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#MysQL-架构"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">MysQL 架构</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#MySQL-的锁"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">MySQL 的锁</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#MySQL-日志"><span class="post-toc-number">1.1.2.</span> <span class="post-toc-text">MySQL 日志</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#事务"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">事务</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#原子性-A"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">原子性 A</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#一致性"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">一致性</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#隔离性"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">隔离性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#实现原理-基于锁的并发控制流程："><span class="post-toc-number">1.2.3.1.</span> <span class="post-toc-text">实现原理-基于锁的并发控制流程：</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#持久性"><span class="post-toc-number">1.2.4.</span> <span class="post-toc-text">持久性</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#分类"><span class="post-toc-number">1.2.5.</span> <span class="post-toc-text">分类</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#索引"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">索引</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#索引的结构"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">索引的结构</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#哈希索引"><span class="post-toc-number">1.3.1.1.</span> <span class="post-toc-text">哈希索引</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#缺点"><span class="post-toc-number">1.3.1.1.1.</span> <span class="post-toc-text">缺点</span></a></li></ol></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#二叉树、红黑树索引"><span class="post-toc-number">1.3.1.2.</span> <span class="post-toc-text">二叉树、红黑树索引</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#B-树索引"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">B 树索引</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#缺点-1"><span class="post-toc-number">1.3.2.1.</span> <span class="post-toc-text">缺点</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#B-树"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">B+ 树</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#索引的分类"><span class="post-toc-number">1.3.4.</span> <span class="post-toc-text">索引的分类</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#主键索引"><span class="post-toc-number">1.3.4.1.</span> <span class="post-toc-text">主键索引</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#辅助索引"><span class="post-toc-number">1.3.4.2.</span> <span class="post-toc-text">辅助索引</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#唯一索引"><span class="post-toc-number">1.3.4.3.</span> <span class="post-toc-text">唯一索引</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#全文索引"><span class="post-toc-number">1.3.4.4.</span> <span class="post-toc-text">全文索引</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#组合索引"><span class="post-toc-number">1.3.4.5.</span> <span class="post-toc-text">组合索引</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#索引技术名词"><span class="post-toc-number">1.3.5.</span> <span class="post-toc-text">索引技术名词</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#回表"><span class="post-toc-number">1.3.5.1.</span> <span class="post-toc-text">回表</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#最左匹配"><span class="post-toc-number">1.3.5.2.</span> <span class="post-toc-text">最左匹配</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#索引覆盖"><span class="post-toc-number">1.3.5.3.</span> <span class="post-toc-text">索引覆盖</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#索引下推"><span class="post-toc-number">1.3.5.4.</span> <span class="post-toc-text">索引下推</span></a></li></ol></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-数据存储/MySQL/MySQL 学习总结"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">数据存储/MySQL/MySQL 学习总结</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-04-28 23:01:23" datetime="2020-04-28T15:01:23.967Z"  itemprop="datePublished">2020-04-28</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/MySQL/">MySQL</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="MySQL-学习总结"><a href="#MySQL-学习总结" class="headerlink" title="MySQL 学习总结"></a>MySQL 学习总结</h2><h3 id="MysQL-架构"><a href="#MysQL-架构" class="headerlink" title="MysQL 架构"></a>MysQL 架构</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://note.youdao.com/yws/api/personal/file/WEB40e7894c09929b10b65628a164da9a2c?method=download&shareKey=ce955cd898d0763566e9feef24f83210" alt="MySQL架构图" title="">
                </div>
                <div class="image-caption">MySQL架构图</div>
            </figure>

<p>InnoDB 不是 MySQL 自带的存储引擎，是一种可插拔的插件。InnoDB、MyISAM、MEMORY存储引擎是根据表来设置的，同一个库不同的表可以使用不同的存储引擎。</p>
<p>不同的存储引擎在索引、事务、锁的支持上是有区别的</p>
<table>
<thead>
<tr>
<th>存储引擎</th>
<th>事务</th>
<th>锁</th>
<th>分布式事务</th>
</tr>
</thead>
<tbody><tr>
<td>InnoDB</td>
<td>支持</td>
<td>表锁、行锁</td>
<td>支持</td>
</tr>
<tr>
<td>MyISAM</td>
<td>不支持</td>
<td>表锁</td>
<td>不支持</td>
</tr>
</tbody></table>
<h4 id="MySQL-的锁"><a href="#MySQL-的锁" class="headerlink" title="MySQL 的锁"></a>MySQL 的锁</h4><p>排他锁、共享锁、独占锁(MyISAM)、自增锁、间隙锁、意向锁</p>
<ul>
<li>共享锁：将数据对象变为只读形式，不能进行更新，也称为读取锁定；<code>lock in share mode</code></li>
<li>拍他锁：当执行 <code>INSERT\UPDATE\DELETE</code> 的时候，其他事务不能读取该数据；<code>for update</code></li>
<li>间隙锁：对某个范围加锁，这样可以用来解决范围内插入造成幻读的问题</li>
</ul>
<p>InnoDB 默认情况下是行锁，但是如果表没有索引的时候加的是表锁。</p>
<p>死锁：互相占用需要的资源，MySQL 解决死锁的方式：超时检测；wait for graphy 深度优先遍历检测有没有环</p>
<h4 id="MySQL-日志"><a href="#MySQL-日志" class="headerlink" title="MySQL 日志"></a>MySQL 日志</h4><ul>
<li>binlog：归属于 server 层，stat、row、mixed三种格式</li>
<li>慢查询日志：</li>
<li>redo日志：物理日志，保证所有数据的完整性，针对数据页操作记录</li>
<li>undo日志：逻辑日志，保证单行数据实现原子性，还可以用来实现 mvcc(多版本并发控制)；针对数据行操作<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3>数据库事务是构成单一逻辑工作单元的操作集合</li>
<li>数据库事务可以包含一个或者多个数据库操作，这些操作构成一个逻辑上的整体</li>
<li>构成逻辑整体的这些数据库操作，要么全部执行成功，要么全部不执行</li>
<li>构成事务的所有操作，要么全部都对数据库产生影响，要么全部不影响，即数据库总能保持一致性状态</li>
<li>并发操作下，事务的控制尤其重要<h4 id="原子性-A"><a href="#原子性-A" class="headerlink" title="原子性 A"></a>原子性 A</h4>所有操作作为一个原子，要么全部成功，要么全部不成功。<br><br>通过 undo 日志来实现，数据库在执行操作时首先将操作之前的数据备份到 undo log 中，然后在事务执行失败后用户执行了 rollback 操作，利用 undo log 将数据恢复到事务执行之前。<br><br>undo log 是逻辑日志，undo 日志针对的行数据操作进行记录<h4 id="一致性"><a href="#一致性" class="headerlink" title="一致性"></a>一致性</h4>事务的执行结果使数据库从一个一致性状态到另一个一致性状态；一致性状态是指：1、系统的状态满足数据的完整性约束，2、系统的状态反应数据库本应描述的现实世界的状态。</li>
</ul>
<p>事务的四个特性中，一致性是事务的根本追求。但是事务的并发执行、事务故障和系统故障会对一致性造成破坏。并发控制技术保证了事务的隔离性，使得事务在并发情况下不会破坏一致性；undo 日志恢复技术保证了事务的原子性，使一致性状态不会因为事务或系统故障破坏；redo 日志保证提交的修改不会因为系统奔溃而丢失，保证了事务的持久性。</p>
<h4 id="隔离性"><a href="#隔离性" class="headerlink" title="隔离性"></a>隔离性</h4><p>并发自行的事务不会互相影响，和串行化执行时一样。完全的隔离性会导致系统性能降低，降低对资源的利用率，但是降低隔离性后也会导致一致性标准降低，所以根据不同的业务需要也会有不同的隔离级别。</p>
<ul>
<li>读未提交(READ UNCOMMITED)：存在脏读、不可重复度、幻读问题</li>
<li>读已提交(READ COMMITED)：存在不可重复度、幻读问题</li>
<li>可重复度(REPEATABLE READ)：默认，存在幻读问题；在同一个事务中重复读取数据，读取到的是一致的</li>
<li>串行化(SERIALIZABLE)：</li>
</ul>
<p>几种问题：</p>
<ul>
<li>脏读： A 客户端可以读取到 B 客户端事务还没有提交的更改</li>
<li>不可重复读：A 客户端正在修改数据，B 客户端在整个事务过程中读取到的数据不一致(A 事务提交之前和提交之后)</li>
<li>幻读：在 A 客户端中插入数据，在 B 客户端中范围读取数据，当 A 插入的数据在这个范围中时，此时 B 是读取不到的，但是当 B 也插入该数据时有可能会成功有可能会失败(具体看表设计)。<h5 id="实现原理-基于锁的并发控制流程："><a href="#实现原理-基于锁的并发控制流程：" class="headerlink" title="实现原理-基于锁的并发控制流程："></a>实现原理-基于锁的并发控制流程：</h5></li>
<li>事务根据自己对数据项的操作类型申请相应的锁（读申请共享锁，写申请拍他锁）</li>
<li>申请锁的请求发给锁管理器，锁管理器根据当前数据项是否已经有锁以及申请的和持有的锁是否冲突决定是否为该请求授予锁</li>
<li>若锁被授予，则申请事务的锁可以继续执行；若被拒绝，则申请锁的事务继续等待直到其他事务放弃锁</li>
</ul>
<p>也可以通过时间戳、有效性检查和快照隔离实现并发性控制</p>
<h4 id="持久性"><a href="#持久性" class="headerlink" title="持久性"></a>持久性</h4><p>事务一旦提交，其对数据库的更新就是持久的，任何事务或者系统故障都不会导致数据丢失。<br><br>利用 redo log 来实现，事务提交前，先将 redo log 持久化，再持久化数据。当系统奔溃时，系统可以根据 redo log 将数据恢复。InnoDB 根据 <code>innodb_flush_log_at_trx_commit</code> 参数来设置：</p>
<ul>
<li>事务提交，每秒写入 OS Buffer，并调用 fsync() 写入磁盘</li>
<li>事务提交，每次提交时写入 OS Buffer，并调用 fsync() 写入磁盘</li>
<li>事务提交，每次提交时写入 OS Buffer，并调用 fsync() 写入磁盘<h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4></li>
<li>扁平事务：例如 commit rollback</li>
<li>链式事务</li>
<li>嵌套事务<h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3>索引帮助高效获取数据的数据结构，存储在文件系统中，文件的存储形式与存储引擎有关(InnoDB-<em>.idb；MyISAM-</em>.myd,*.myi)。主要有 hash 索引、二叉树、B-Tree、B+Tree。InnoDB 索引主要使用B+Tree，但是在 InnodB 内部，当某索引访问次数过多时会将其转化为自适应的哈希索引。<h4 id="索引的结构"><a href="#索引的结构" class="headerlink" title="索引的结构"></a>索引的结构</h4><h5 id="哈希索引"><a href="#哈希索引" class="headerlink" title="哈希索引"></a>哈希索引</h5>数组+链表来实现，查询的时候需要先计算查询条件的哈希值，然后找到数组对应位置，然后链表比对查找。<h6 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h6></li>
<li>哈希算法需要尽可能避免哈希碰撞，哈希碰撞会导致哈希索引性能退化；</li>
<li>等值查询的时候哈希索引才能生效，范围查找哈希索引无效；</li>
<li>哈希索引需要将数据文件存储在内存中，比较耗费空间；<h5 id="二叉树、红黑树索引"><a href="#二叉树、红黑树索引" class="headerlink" title="二叉树、红黑树索引"></a>二叉树、红黑树索引</h5>当树的深度过深而造成 IO 次数变多影响效率。<h4 id="B-树索引"><a href="#B-树索引" class="headerlink" title="B 树索引"></a>B 树索引</h4></li>
<li>所有键值分布在整个树中，找到节点就找到了数据，不用再去映射；key 存储节点地址信息，value 存储对应的行数据</li>
<li>搜索可能在非叶子节点就找到，性能较高</li>
<li>每个节点最多 m 个子树，根节点至少 2 个子树</li>
<li>分支节点拥有 m/2 棵子树，</li>
<li>所有叶子节点都在同一层，每个叶子节点最多可以有 m-1 个 key，并且以升序排列。<h5 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h5></li>
<li>每个节点既要存储地址信息还有 data 数据，如果 data 数据过大会导致 IO 的压力过大，增加 IO 次数也会导致性能下降。<h4 id="B-树"><a href="#B-树" class="headerlink" title="B+ 树"></a>B+ 树</h4></li>
<li>在 B 树的基础上，所有的非叶子节点不再存储 data 数据，叶子节点存储 key 和 data 数据。</li>
<li>B+ 树有两个头指针，一个指向根节点，一个指向关键字最小的叶子节点</li>
<li>叶子结点是一种链式环结构因此可以对 B+ 树进行两种查找：一种是对于主键的范围查找和分页查找；一种是从根节点开始的随机查找</li>
</ul>
<p>这里的 key 是在建表的时候，如果有主键则用主键，否则用唯一键，如果还没有则会生成一个 6 字节的 rowId 来用。</p>
<p>B+ 每个叶子结点块节点个数是有限的，所以如果要插入数据则有可能引起叶子节点块儿分裂，分裂后还要调整上层的非叶子节点，所以在设置主键的尽量可以设置成自增的；当删除的时候又可能需要进行合并。</p>
<p>MyISAM 和 InnoDB 都使用了 B+ 树，但是在叶子节点上，InnoDB 存储了实际的行数据，MyISAM 存储的是数据地址</p>
<h4 id="索引的分类"><a href="#索引的分类" class="headerlink" title="索引的分类"></a>索引的分类</h4><h5 id="主键索引"><a href="#主键索引" class="headerlink" title="主键索引"></a>主键索引</h5><p>可以通过主键在索引中直接查找，找到后即可拿到数据</p>
<h5 id="辅助索引"><a href="#辅助索引" class="headerlink" title="辅助索引"></a>辅助索引</h5><p>给非主键列添加索引，索引的实现结构还是 B+ 树，但是叶子节点存储的不是实际数据了而是对应的主键值；查找的时候先根据普通索引查找到对应的主键，然后在逐渐索引中查找对应的数据</p>
<h5 id="唯一索引"><a href="#唯一索引" class="headerlink" title="唯一索引"></a>唯一索引</h5><p>主键：唯一且非空，唯一键可以空</p>
<h5 id="全文索引"><a href="#全文索引" class="headerlink" title="全文索引"></a>全文索引</h5><p>全文索引更适合做搜索相关</p>
<h5 id="组合索引"><a href="#组合索引" class="headerlink" title="组合索引"></a>组合索引</h5><p>组合索引在存储的时候先判断第一列然后判断第二列。。。将其构建为 B+ 树</p>
<h4 id="索引技术名词"><a href="#索引技术名词" class="headerlink" title="索引技术名词"></a>索引技术名词</h4><h5 id="回表"><a href="#回表" class="headerlink" title="回表"></a>回表</h5><p>普通索引查询后需要根据主键索引去查找对应的数据叫做回表</p>
<h5 id="最左匹配"><a href="#最左匹配" class="headerlink" title="最左匹配"></a>最左匹配</h5><p>组合索引中先从组合索引左列开始匹配，如果没有使用最左列的条件，则组合索引失效；如果查询条件都使用了组合索引的列但是顺序不是组合索引的顺序，MySQL 的优化器会将其进行优化。</p>
<h5 id="索引覆盖"><a href="#索引覆盖" class="headerlink" title="索引覆盖"></a>索引覆盖</h5><p>在查询的辅助索引的时候，如果叶子节点保存的刚好是要查找的字段数据叫做索引覆盖</p>
<h5 id="索引下推"><a href="#索引下推" class="headerlink" title="索引下推"></a>索引下推</h5><p>现通过索引讲符合记录筛选出来然后在回表查询对应数据，减少回表查询的数据行</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2020-04-28T15:04:42.646Z" itemprop="dateUpdated">2020-04-28 23:04:42</time>
</span><br>


        
    </div>
    
    <footer>
        <a href="https://zcy-fover.github.io">
            <img src="https://pic.yupoo.com/zcyfover/782a3ab3/13a00e51.jpeg" alt="zcy-fover">
            zcy-fover
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL%E4%BA%8B%E5%8A%A1/" rel="tag">MySQL事务</a></li></ul>


            


        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2020/04/28/java/jvm/JVM-GC%E7%AD%96%E7%95%A5/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">java/jvm/JVM-GC策略</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2020/04/19/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E7%BE%8E/12.%E4%BA%8C%E5%8F%89%E6%A0%91/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">数据结构和算法/数据结构与算法之美/12.二叉树</h4>
      </a>
    </div>
  
</nav>



    




















</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>zcy-fover &copy; 2019 - 2020</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: false, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '死鬼去哪里了！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
